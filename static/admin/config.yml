# Sveltia CMS Configuration
# For more information, see: https://sveltia-cms-docs.netlify.app/

backend:
  name: github
  repo: EFA44/site
  branch: main
  base_url: https://efa44.org
  auth_endpoint: /api/auth

display_url: https://efa44.org
site_url: https://efa44.org
logo:
  src: https://efa44.uni.bzh/img/efa44-logo.svg

media_folder: "static/files"
public_folder: "/files"

media_libraries:
  stock_assets:
    providers: []
  default:
    config:
      transformations:
        raster_image:
          format: webp
          quality: 85
          width: 2048
          height: 2048
        svg:
          optimize: true

i18n:
  structure: single_file
  locales: [fr]
  default_locale: fr

collections:
  # Contenu du site
  - name: "events"
    label: "Évènements"
    label_singular: "Évènement"
    folder: "content/events"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    preview_path: "events/{{slug}}"
    icon: calendar_month
    fields:
      - { label: "Titre", name: "title", widget: "string" }
      - { label: "Auteur", name: "author", widget: "hidden", default: "EFA44" }
      - { label: "Date", name: "date", widget: "datetime", time_format: false }
      - {
          label: "Résumé",
          name: "description",
          widget: "text",
          required: false,
        }
      - {
          label: "Tags",
          name: "tags",
          widget: "select",
          multiple: true,
          options:
            [
              "conference",
              "visio",
              "diner",
              "temoignage",
              "assemblee-generale",
              "pique-nique",
              "projection",
              "atelier",
              "partenariat",
              "autres",
            ],
        }
      - { label: "Contenu", name: "body", widget: "markdown" }

  - name: "pages"
    label: "Pages"
    label_singular: "Page"
    folder: "content/pages"
    create: true
    slug: "{{slug}}"
    preview_path: "pages/{{slug}}"
    icon: description
    fields:
      - { label: "Titre", name: "title", widget: "string", required: true }
      - { label: "Résumé", name: "description", widget: "text", required: true }
      - { label: "Contenu", name: "body", widget: "markdown" }
      - label: "Sections de documents"
        name: "documents"
        widget: "list"
        required: false
        fields:
          - label: "Dossier des documents"
            name: "dossier"
            widget: "select"
            options:
              - { label: "Rapports d'activités", value: "activites" }
              - { label: "Statuts", value: "statuts" }
              - { label: "Règlement", value: "reglement" }
              - { label: "Autres documents", value: "documents" }
          - { label: "Titre de la section", name: "titre", widget: "string" }
          - { label: "Description", name: "description", widget: "text" }
          - label: "Documents à afficher"
            name: "files"
            widget: "list"
            required: false
            field: 
              label: "Fichier"
              name: "file"
              widget: "file"
              media_library:
                config:
                  max_file_size: 10737418240

  - divider: true
    name: divider_customization

  # Configuration du site
  - name: "index"
    label: "Accueil"
    label_singular: "Accueil"
    icon: home
    files:
      - name: "index"
        label: "Configuration de la page d'accueil"
        file: "content/_index.md"
        fields:
          - { label: "Titre", name: "title", widget: "string" }
          - label: "Héros"
            name: "hero"
            widget: "object"
            fields:
              - { label: "Titre principal", name: "title", widget: "string" }
              - { label: "Texte en surbrillance", name: "highlight", widget: "string" }
              - { label: "Sous-titre", name: "subtitle", widget: "text" }
          - label: "Mission"
            name: "mission"
            widget: "object"
            fields:
              - { label: "Titre", name: "title", widget: "string" }
          - label: "Cartes de services"
            name: "cards"
            widget: "list"
            fields:
              - { label: "Titre", name: "title", widget: "string" }
              - label: "Icône"
                name: "icon"
                widget: "select"
                options:
                  - { label: "Compas", value: "compass" }
                  - { label: "Diplôme", value: "graduation-cap" }
                  - { label: "Utilisateurs", value: "users" }
                  - { label: "Microphone", value: "microphone" }
                  - { label: "Commentaires", value: "comments" }
                  - { label: "Palette", value: "palette" }
                  - { label: "Enfant", value: "child" }
                  - { label: "Livre", value: "book" }
                  - { label: "Téléphone", value: "phone" }
              - { label: "Description", name: "content", widget: "text" }
              - { label: "Lien", name: "link", widget: "string" }
          - label: "Appel à l'action"
            name: "cta"
            widget: "object"
            fields:
              - { label: "Titre", name: "title", widget: "string" }
              - { label: "Texte", name: "text", widget: "text" }
              - { label: "Lien", name: "link", widget: "string" }
              - { label: "Libellé du bouton", name: "label", widget: "string" }